const $noteTitle=$(".note-title"),$noteText=$(".note-textarea"),$saveNoteBtn=$(".save-note"),$newNoteBtn=$(".new-note"),$noteList=$(".list-container .list-group");let activeNote={};const getNotes=()=>$.ajax({url:"/api/notes",method:"GET"}),saveNote=e=>$.ajax({url:"/api/notes",data:e,method:"POST"}),deleteNote=e=>$.ajax({url:"api/notes/"+e,method:"DELETE"}),renderActiveNote=()=>{$saveNoteBtn.hide(),activeNote.id?($noteTitle.attr("readonly",!0),$noteText.attr("readonly",!0),$noteTitle.val(activeNote.title),$noteText.val(activeNote.text)):($noteTitle.attr("readonly",!1),$noteText.attr("readonly",!1),$noteTitle.val(""),$noteText.val(""))},handleNoteSave=function(){var e={title:$noteTitle.val(),text:$noteText.val()};saveNote(e).then(()=>{getAndRenderNotes(),renderActiveNote()})},handleNoteDelete=function(e){e.stopPropagation();e=$(this).parent(".list-group-item").data();activeNote.id===e.id&&(activeNote={}),deleteNote(e.id).then(()=>{getAndRenderNotes(),renderActiveNote()})},handleNoteView=function(){activeNote=$(this).data(),renderActiveNote()},handleNewNoteView=function(){activeNote={},renderActiveNote()},handleRenderSaveBtn=function(){$noteTitle.val().trim()&&$noteText.val().trim()?$saveNoteBtn.show():$saveNoteBtn.hide()},renderNoteList=e=>{$noteList.empty();const t=[];var n=(e,t)=>{const n=$("<li class='list-group-item'>");e=$("<span>").text(e);return n.append(e),t&&(t=$("<i class='fas fa-trash-alt float-right text-danger delete-note'>"),n.append(t)),n};0===e.length&&t.push(n("No saved Milestone Notes",!1)),e.forEach(e=>{e=n(e.title).data(e);t.push(e)}),$noteList.append(t)},getAndRenderNotes=()=>getNotes().then(renderNoteList);$saveNoteBtn.on("click",handleNoteSave),$noteList.on("click",".list-group-item",handleNoteView),$newNoteBtn.on("click",handleNewNoteView),$noteList.on("click",".delete-note",handleNoteDelete),$noteTitle.on("keyup",handleRenderSaveBtn),$noteText.on("keyup",handleRenderSaveBtn),getAndRenderNotes();